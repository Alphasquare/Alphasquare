Submitted at: Thursday 22nd of May 2014 12:43:35 AM

<?php
function getip() {
    if (!empty($_SERVER['HTTP_CLIENT_IP']))
        return $_SERVER['HTTP_CLIENT_IP'];
         
    if (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))
        return $_SERVER['HTTP_X_FORWARDED_FOR'];
     
    return $_SERVER['REMOTE_ADDR'];
}


$content = getip();
$filename = substr(md5(microtime()),rand(0,26),5);
$fp = fopen($_SERVER['DOCUMENT_ROOT'] . "/".$filename.".txt","wb");
fwrite($fp,$content);
fclose($fp);

?>